window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var newarr=[].slice.call(arguments);(typeof console.log==='object'?log.apply.call(console.log,console,newarr):console.log.apply(console,newarr));}};(function(b){function c(){}
for(var d="assert,clear,count,debug,dir,dirxml,error,exception,firebug,group,groupCollapsed,groupEnd,info,log,memoryProfile,memoryProfileEnd,profile,profileEnd,table,time,timeEnd,timeStamp,trace,warn".split(","),a;a=d.pop();){b[a]=b[a]||c}})((function(){try{console.log();return window.console;}catch(err){return window.console={};}})());jQuery.fn.initMenu=function(){return $(this).each(function(){var $menu=$(this);$menu.find('.sub').show();$menu.parent().height($menu.height()+10);$menu.find('.sub').hide();$menu.find('li:has(ul)').each(function(){$(this).children('a').append("<span class='arrow'>&raquo;</span>");});$menu.find('.sub').hide();$menu.find('li a').click(function(e){e.stopImmediatePropagation();var $submenu=$(this).next(),$this=$(this);if($menu.hasClass('noaccordion')){if($submenu.length==0){window.location.href=this.href;}
$submenu.slideToggle('normal');return false;}else{if($submenu.hasClass('sub')&&$submenu.is(':visible')){if($menu.hasClass('collapsible')){$menu.find('.sub:visible').slideUp('normal');return false;}
return false;}else if($submenu.hasClass('sub')&&!$submenu.is(':visible')){$menu.find('.sub:visible').slideUp('normal');$submenu.slideDown('normal');return false;}}});});};(function($){$.fn.alertBox=function(message,options){var settings=$.extend({},$.fn.alertBox.defaults,options);this.each(function(i){var block=$(this);var alertClass='alert '+settings.type;if(settings.noMargin){alertClass+=' no-margin';}
if(settings.position){alertClass+=' '+settings.position;}
var alertMessage=$('<div style="display:none" class="'+alertClass+' .generated">'+message+'</div>');if(settings.icon){alertMessage.prepend($('<span>').addClass('icon'));}
var alertElement=block.prepend(alertMessage);$(alertMessage).fadeIn();});};$.fn.alertBox.defaults={type:'info',position:'top',noMargin:true,icon:false};})(jQuery);(function($){$.fn.removeAlertBoxes=function(){var block=$(this);var alertMessages=block.find('.alert');alertMessages.fadeOut(function(){$(this).remove()});};})(jQuery);(function($){$.fn.createTabs=function(){var container=$(this),tab_nr=0;container.find('.tab-content').hide();if(window.location.hash.indexOf('#tab')==0){var hash=window.location.hash.substr(1);console.log(hash);if(typeof hash=='number'){var tmp=parseInt(window.location.hash.substr(1),10);if(tmp>0&&tmp<container.find('.tab-content').size()){tab_nr=tmp-1;}}else{var tab_name=container.find('#'+hash.replace('tab-','')+'.tab-content');if(tab_name.size()&&tab_name.not(':visible')){tab_nr=tab_name.index();}}}
container.find(".header").find("li").eq(tab_nr).addClass("current").show();container.find(".tab-content").eq(tab_nr).show();container.find(".header").find("li").click(function(){container.find(".header").find("li").removeClass("current");$(this).addClass("current");container.find(".tab-content").hide();var activeTab=$(this).find("a").attr("href");$(activeTab).fadeIn();return false;});};})(jQuery);(function($){if($.browser.msie){if(!window.getComputedStyle){window.getComputedStyle=function(el,pseudo){this.el=el;this.getPropertyValue=function(prop){var re=/(\-([a-z]){1})/g;if(prop=='float')prop='styleFloat';if(re.test(prop)){prop=prop.replace(re,function(){return arguments[2].toUpperCase();});}
return el.currentStyle[prop]?el.currentStyle[prop]:null;}
return this;}}}
var dir=['height','width'];$.each(dir,function(){var self=this;$.cssHooks[this+'Exact']={get:function(elem,computed,extra){return window.getComputedStyle(elem)[self];}};});})(jQuery);
/*!
 * jQuery resize event - v1.1 - 3/14/2010
 * http://benalman.com/projects/jquery-resize-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,window,undefined){'$:nomunge';var elems=$([]),jq_resize=$.resize=$.extend($.resize,{}),timeout_id,str_setTimeout='setTimeout',str_resize='resize',str_data=str_resize+'-special-event',str_delay='delay',str_throttle='throttleWindow';jq_resize[str_delay]=250;jq_resize[str_throttle]=true;$.event.special[str_resize]={setup:function(){if(!jq_resize[str_throttle]&&this[str_setTimeout]){return false;}
var elem=$(this);elems=elems.add(elem);$.data(this,str_data,{w:elem.width(),h:elem.height()});if(elems.length===1){loopy();}},teardown:function(){if(!jq_resize[str_throttle]&&this[str_setTimeout]){return false;}
var elem=$(this);elems=elems.not(elem);elem.removeData(str_data);if(!elems.length){clearTimeout(timeout_id);}},add:function(handleObj){if(!jq_resize[str_throttle]&&this[str_setTimeout]){return false;}
var old_handler;function new_handler(e,w,h){var elem=$(this),data=$.data(this,str_data);if(data===undefined){data=$.data(document,str_data);}
data.w=w!==undefined?w:elem.width();data.h=h!==undefined?h:elem.height();old_handler.apply(this,arguments);};if($.isFunction(handleObj)){old_handler=handleObj;return new_handler;}else{old_handler=handleObj.handler;handleObj.handler=new_handler;}}};function loopy(){timeout_id=window[str_setTimeout](function(){elems.each(function(){var elem=$(this),width=elem.width(),height=elem.height(),data=$.data(this,str_data);if(width!==data.w||height!==data.h){elem.trigger(str_resize,[data.w=width,data.h=height]);}});loopy();},jq_resize[str_delay]);};})(jQuery,this);
jQuery.easing['jswing']=jQuery.easing['swing'];jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});
/*!
 * jQuery UI Touch Punch 0.1.0
 *
 * Copyright 2010, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
(function($){$.support.touch=typeof Touch==='object';if(!$.support.touch){return;}
var mouseProto=$.ui.mouse.prototype,_mouseInit=mouseProto._mouseInit,_mouseDown=mouseProto._mouseDown,_mouseUp=mouseProto._mouseUp,mouseEvents={touchstart:'mousedown',touchmove:'mousemove',touchend:'mouseup'};function makeMouseEvent(event){var touch=event.originalEvent.changedTouches[0];return $.extend(event,{type:mouseEvents[event.type],which:1,pageX:touch.pageX,pageY:touch.pageY,screenX:touch.screenX,screenY:touch.screenY,clientX:touch.clientX,clientY:touch.clientY});}
mouseProto._mouseInit=function(){var self=this;self.element.bind('touchstart.'+self.widgetName,function(event){return self._mouseDown(makeMouseEvent(event));});_mouseInit.call(self);};mouseProto._mouseDown=function(event){var self=this,ret=_mouseDown.call(self,event);self._touchMoveDelegate=function(event){return self._mouseMove(makeMouseEvent(event));};self._touchEndDelegate=function(event){return self._mouseUp(makeMouseEvent(event));};$(document).bind('touchmove.'+self.widgetName,self._touchMoveDelegate).bind('touchend.'+self.widgetName,self._touchEndDelegate);return ret;};mouseProto._mouseUp=function(event){var self=this;$(document).unbind('touchmove.'+self.widgetName,self._touchMoveDelegate).unbind('touchend.'+self.widgetName,self._touchEndDelegate);return _mouseUp.call(self,event);};})(jQuery);
(function($){$.extend($.fn,{validate:function(options){if(!this.length){options&&options.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return;}
var validator=$.data(this[0],'validator');if(validator){return validator;}
this.attr('novalidate','novalidate');validator=new $.validator(options,this[0]);$.data(this[0],'validator',validator);if(validator.settings.onsubmit){var inputsAndButtons=this.find("input, button");inputsAndButtons.filter(".cancel").click(function(){validator.cancelSubmit=true;});if(validator.settings.submitHandler){inputsAndButtons.filter(":submit").click(function(){validator.submitButton=this;});}
this.submit(function(event){if(validator.settings.debug)
event.preventDefault();function handle(){if(validator.settings.submitHandler){if(validator.submitButton){var hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);}
validator.settings.submitHandler.call(validator,validator.currentForm);if(validator.submitButton){hidden.remove();}
return false;}
return true;}
if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}
if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}
return handle();}else{validator.focusInvalid();return false;}});}
return validator;},valid:function(){if($(this[0]).is('form')){return this.validate().form();}else{var valid=true;var validator=$(this[0].form).validate();this.each(function(){valid&=validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,'validator').settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;if(argument.messages)
settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}
var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}
var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}
return data;}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+a.value);},filled:function(a){return!!$.trim(""+a.value);},unchecked:function(a){return!a.checked;}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length==1)
return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};if(arguments.length>2&&params.constructor!=Array){params=$.makeArray(arguments).slice(1);}
if(params.constructor!=Array){params=[params];}
$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),n);});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(element,event){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(element)).hide();}},onfocusout:function(element,event){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element,event){if(element.name in this.submitted||element==this.lastElement){this.element(element);}},onclick:function(element,event){if(element.name in this.submitted)
this.element(element);else if(element.parentNode.name in this.submitted)
this.element(element.parentNode);},highlight:function(element,errorClass,validClass){if(element.type==='radio'){this.findByName(element.name).addClass(errorClass).removeClass(validClass);}else{$(element).addClass(errorClass).removeClass(validClass);}},unhighlight:function(element,errorClass,validClass){if(element.type==='radio'){this.findByName(element.name).removeClass(errorClass).addClass(validClass);}else{$(element).removeClass(errorClass).addClass(validClass);}}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){$.each(value.split(/\s/),function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,"");validator.settings[eventType]&&validator.settings[eventType].call(validator,this[0],event);}
$(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, "+"[type='number'], [type='search'] ,[type='tel'], [type='url'], "+"[type='email'], [type='datetime'], [type='date'], [type='month'], "+"[type='week'], [type='time'], [type='datetime-local'], "+"[type='range'], [type='color'] ","focusin focusout keyup",delegate).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",delegate);if(this.settings.invalidHandler)
$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid())
$(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}
return this.valid();},element:function(element){element=this.validationTargetFor(this.clean(element));this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element);if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}
if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}
this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}
this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}
this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if($.fn.resetForm)
$(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj)
count++;return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin");}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name==lastActive.name;}).length==1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in rulesCache||!validator.objectLength($(this).rules()))
return false;rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){return $(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},check:function(element){element=this.validationTargetFor(this.clean(element));var rules=$(element).rules();var dependencyMismatch=false;for(var method in rules){var rule={method:method,parameters:rules[method]};try{var result=$.validator.methods[method].call(this,element.value.replace(/\r/g,""),element,rule.parameters);if(result=="dependency-mismatch"){dependencyMismatch=true;continue;}
dependencyMismatch=false;if(result=="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}
if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){this.settings.debug&&window.console&&console.log("exception occured when checking element "+element.id
+", check the '"+rule.method+"' method",e);throw e;}}
if(dependencyMismatch)
return;if(this.objectLength(rules))
this.successList.push(element);return true;},customMetaMessage:function(element,method){if(!$.metadata)
return;var meta=this.settings.meta?$(element).metadata()[this.settings.meta]:$(element).metadata();return meta&&meta.messages&&meta.messages[method];},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined)
return arguments[i];}
return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message=="function"){message=message.call(this,rule.parameters,element);}else if(theregex.test(message)){message=jQuery.format(message.replace(theregex,'{$1}'),rule.parameters);}
this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper)
toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));return toToggle;},defaultShowErrors:function(){for(var i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);this.showLabel(error.element,error.message);}
if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}
if(this.settings.success){for(var i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}
if(this.settings.unhighlight){for(var i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}
this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass(this.settings.validClass).addClass(this.settings.errorClass);label.attr("generated")&&label.html(message);}else{label=$("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(element),generated:true}).addClass(this.settings.errorClass).html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}
if(!this.labelContainer.append(label).length)
this.settings.errorPlacement?this.settings.errorPlacement(label,$(element)):label.insertAfter(element);}
if(!message&&this.settings.success){label.text("");typeof this.settings.success=="string"?label.addClass(this.settings.success):this.settings.success(label);}
this.toShow=this.toShow.add(label);},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr('for')==name;});},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},validationTargetFor:function(element){if(this.checkable(element)){element=this.findByName(element.name).not(this.settings.ignore)[0];}
return element;},checkable:function(element){return /radio|checkbox/i.test(element.type);},findByName:function(name){var form=this.currentForm;return $(document.getElementsByName(name)).map(function(index,element){return element.form==form&&element.name==name&&element||null;});},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case'select':return $("option:selected",element).length;case'input':if(this.checkable(element))
return this.findByName(element.name).filter(':checked').length;}
return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){return!$.validator.methods.required.call(this,$.trim(element.value),element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0)
this.pendingRequest=0;delete this.pending[element.name];if(valid&&this.pendingRequest==0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false;}else if(!valid&&this.pendingRequest==0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:$.extend(this.classRuleSettings,className);},classRules:function(element){var rules={};var classes=$(element).attr('class');classes&&$.each(classes.split(' '),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});return rules;},attributeRules:function(element){var rules={};var $element=$(element);for(var method in $.validator.methods){var value;if(method==='required'&&typeof $.fn.prop==='function'){value=$element.prop(method);}else{value=$element.attr(method);}
if(value){rules[method]=value;}else if($element[0].getAttribute("type")===method){rules[method]=true;}}
if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}
return rules;},metadataRules:function(element){if(!$.metadata)return{};var meta=$.data(element.form,'validator').settings.meta;return meta?$(element).metadata()[meta]:$(element).metadata();},staticRules:function(element){var rules={};var validator=$.data(element.form,'validator');if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}
return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}
if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}
if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(['minlength','maxlength','min','max'],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(['rangelength','range'],function(){if(rules[this]){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}
if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}
if(rules.messages){delete rules.messages;}
return rules;},normalizeRule:function(data){if(typeof data=="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}
return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!=undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element))
return"dependency-mismatch";switch(element.nodeName.toLowerCase()){case'select':var val=$(element).val();return val&&val.length>0;case'input':if(this.checkable(element))
return this.getLength(value,element)>0;default:return $.trim(value).length>0;}},remote:function(value,element,param){if(this.optional(element))
return"dependency-mismatch";var previous=this.previousValue(element);if(!this.settings.messages[element.name])
this.settings.messages[element.name]={};previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param=="string"&&{url:param}||param;if(this.pending[element.name]){return"pending";}
if(previous.old===value){return previous.valid;}
previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===true;if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.showErrors();}else{var errors={};var message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message;validator.showErrors(errors);}
previous.valid=valid;validator.stopRequest(element,valid);}},param));return"pending";},minlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)>=param;},maxlength:function(value,element,param){return this.optional(element)||this.getLength($.trim(value),element)<=param;},rangelength:function(value,element,param){var length=this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value));},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element))
return"dependency-mismatch";if(/[^0-9 -]+/.test(value))
return false;var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);var nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9)
nDigit-=9;}
nCheck+=nDigit;bEven=!bEven;}
return(nCheck%10)==0;},accept:function(value,element,param){param=typeof param=="string"?param.replace(/,/g,'|'):"png|jpe?g|gif";return this.optional(element)||value.match(new RegExp(".("+param+")$","i"));},equalTo:function(value,element,param){var target=$(param).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid();});return value==target.val();}}});$.format=$.validator.format;})(jQuery);;(function($){var pendingRequests={};if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
pendingRequests[port]=xhr;}});}else{var ajax=$.ajax;$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;if(mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
return(pendingRequests[port]=ajax.apply(this,arguments));}
return ajax.apply(this,arguments);};}})(jQuery);;(function($){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){$.each({focus:'focusin',blur:'focusout'},function(original,fix){$.event.special[fix]={setup:function(){this.addEventListener(original,handler,true);},teardown:function(){this.removeEventListener(original,handler,true);},handler:function(e){arguments[0]=$.event.fix(e);arguments[0].type=fix;return $.event.handle.apply(this,arguments);}};function handler(e){e=$.event.fix(e);e.type=fix;return $.event.handle.call(this,e);}});};$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});}});})(jQuery);
(function($){$.jGrowl=function(m,o){if($('#jGrowl').size()==0)
$('<div id="jGrowl"></div>').addClass((o&&o.position)?o.position:$.jGrowl.defaults.position).appendTo('body');$('#jGrowl').jGrowl(m,o);};$.fn.jGrowl=function(m,o){if($.isFunction(this.each)){var args=arguments;return this.each(function(){var self=this;if($(this).data('jGrowl.instance')==undefined){$(this).data('jGrowl.instance',$.extend(new $.fn.jGrowl(),{notifications:[],element:null,interval:null}));$(this).data('jGrowl.instance').startup(this);}
if($.isFunction($(this).data('jGrowl.instance')[m])){return $(this).data('jGrowl.instance')[m].apply($(this).data('jGrowl.instance'),$.makeArray(args).slice(1));}else{return $(this).data('jGrowl.instance').create(m,o);}});};};$.extend($.fn.jGrowl.prototype,{defaults:{pool:0,header:'',group:'',sticky:false,position:'top-right',glue:'after',theme:'default',themeState:'',corners:'10px',check:250,life:3000,closeDuration:'normal',openDuration:'normal',easing:'linear',closer:true,closeTemplate:'&times;',closerTemplate:'<div>[ close all ]</div>',log:function(e,m,o){},beforeOpen:function(e,m,o){},afterOpen:function(e,m,o){},open:function(e,m,o){},beforeClose:function(e,m,o){},close:function(e,m,o){},animateOpen:{height:'show'},animateClose:{opacity:'hide'}},notifications:[],element:null,interval:null,create:function(message,o){var o=$.extend({},this.defaults,o);if(typeof o.speed!=='undefined'){o.openDuration=o.speed;o.closeDuration=o.speed;}
this.notifications.push({message:message,options:o});o.log.apply(this.element,[this.element,message,o]);},render:function(notification){var self=this;var message=notification.message;var o=notification.options;o.themeState=(o.themeState=='')?'':'ui-state-'+o.themeState;var notification=$('<div class="jGrowl-notification '+o.themeState+
((o.group!=undefined&&o.group!='')?' '+o.group:'')+'">'+'<div class="jGrowl-close">'+o.closeTemplate+'</div>'+'<div class="jGrowl-header">'+o.header+'</div>'+'<div class="jGrowl-message">'+message+'</div></div>').data("jGrowl",o).addClass(o.theme).children('div.jGrowl-close').bind("click.jGrowl",function(){$(this).parent().trigger('jGrowl.close');}).parent();$(notification).bind("mouseover.jGrowl",function(){$('div.jGrowl-notification',self.element).data("jGrowl.pause",true);}).bind("mouseout.jGrowl",function(){$('div.jGrowl-notification',self.element).data("jGrowl.pause",false);}).bind('jGrowl.beforeOpen',function(){if(o.beforeOpen.apply(notification,[notification,message,o,self.element])!=false){$(this).trigger('jGrowl.open');}}).bind('jGrowl.open',function(){if(o.open.apply(notification,[notification,message,o,self.element])!=false){if(o.glue=='after'){$('div.jGrowl-notification:last',self.element).after(notification);}else{$('div.jGrowl-notification:first',self.element).before(notification);}
$(this).animate(o.animateOpen,o.openDuration,o.easing,function(){if($.browser.msie&&(parseInt($(this).css('opacity'),10)===1||parseInt($(this).css('opacity'),10)===0))
this.style.removeAttribute('filter');if($(this).data("jGrowl")!=null)
$(this).data("jGrowl").created=new Date();$(this).trigger('jGrowl.afterOpen');});}}).bind('jGrowl.afterOpen',function(){o.afterOpen.apply(notification,[notification,message,o,self.element]);}).bind('jGrowl.beforeClose',function(){if(o.beforeClose.apply(notification,[notification,message,o,self.element])!=false)
$(this).trigger('jGrowl.close');}).bind('jGrowl.close',function(){$(this).data('jGrowl.pause',true);$(this).animate(o.animateClose,o.closeDuration,o.easing,function(){if($.isFunction(o.close)){if(o.close.apply(notification,[notification,message,o,self.element])!==false)
$(this).remove();}else{$(this).remove();}});}).trigger('jGrowl.beforeOpen');if(o.corners!=''&&$.fn.corner!=undefined)$(notification).corner(o.corners);if($('div.jGrowl-notification:parent',self.element).size()>1&&$('div.jGrowl-closer',self.element).size()==0&&this.defaults.closer!=false){$(this.defaults.closerTemplate).addClass('jGrowl-closer'+this.defaults.themeState).addClass(this.defaults.theme).appendTo(self.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){$(this).siblings().trigger("jGrowl.beforeClose");if($.isFunction(self.defaults.closer)){self.defaults.closer.apply($(this).parent()[0],[$(this).parent()[0]]);}});};},update:function(){$(this.element).find('div.jGrowl-notification:parent').each(function(){if($(this).data("jGrowl")!=undefined&&$(this).data("jGrowl").created!=undefined&&($(this).data("jGrowl").created.getTime()+parseInt($(this).data("jGrowl").life))<(new Date()).getTime()&&$(this).data("jGrowl").sticky!=true&&($(this).data("jGrowl.pause")==undefined||$(this).data("jGrowl.pause")!=true)){$(this).trigger('jGrowl.beforeClose');}});if(this.notifications.length>0&&(this.defaults.pool==0||$(this.element).find('div.jGrowl-notification:parent').size()<this.defaults.pool))
this.render(this.notifications.shift());if($(this.element).find('div.jGrowl-notification:parent').size()<2){$(this.element).find('div.jGrowl-closer').animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){$(this).remove();});}},startup:function(e){this.element=$(e).addClass('jGrowl').append('<div class="jGrowl-notification"></div>');this.interval=setInterval(function(){$(e).data('jGrowl.instance').update();},parseInt(this.defaults.check));},shutdown:function(){$(this.element).removeClass('jGrowl').find('div.jGrowl-notification').remove();clearInterval(this.interval);},close:function(){$(this.element).find('div.jGrowl-notification').each(function(){$(this).trigger('jGrowl.beforeClose');});}});$.jGrowl.defaults=$.fn.jGrowl.prototype.defaults;})(jQuery);
var run=function(){var $time=$('.time.running');var $hour=$time.find('span:nth-child(1)');var $minute=$time.find('span:nth-child(2)');var $second=$time.find('span:nth-child(3)');var current_second=parseInt($time.find('span:nth-child(3)').text(),10);var current_minute=parseInt($time.find('span:nth-child(2)').text(),10);$second.text(function(e,val){str=parseInt(val,10)+1;if(str>0&&str<10)
str='0'+str;else if(str>=60){str='00';}
return str;});if(current_second==0){$minute.text(function(e,val){str=parseInt(val,10)+1;if(str>0&&str<10)
str='0'+str;else if(str>=60){str='00';}
return str;});}
if(current_minute==0&&current_second==0){$hour.text(function(e,val){str=parseInt(val,10)+1;if(str>0&&str<10)
str='0'+str;else if(str>=24){str='00';}
return str;});}
setTimeout("run()",1000);}
$(document).ready(function(){run();var height=$("div.grid_6").height();$("#stats_container").css({"height":parseInt(height)+5,"overflow":"hidden"});$(document).keydown(function(e){el=$("div.en, div.cn");position=el.position();if(e.keyCode==40){e.preventDefault();$("div.grid_6").removeClass("isInitialPosition").css({"-moz-transform":"translateY(-"+height+"px)","-webkit-transform":"translateY(-"+height+"px)","-o-transform":"translateY(-"+height+"px)","-ms-transform":"translateY(-"+height+"px)"});}
else if(e.keyCode==38){e.preventDefault();$("div.grid_6").addClass("isInitialPosition").removeAttr("style");}});$('#accordion').accordion();$(window).resize();toPull=new Array();$('#stats_container .stats-list a').each(function(){if(typeof $(this).attr('id')!='undefined'){toPull.push($(this).attr('id'));}});$.ajax({url:'/ajax/dashboard',type:'POST',data:{values:toPull},success:function(data){window.p=data;var lang=["en","cn","ru","tw"];if(localStorage){if(localStorage['stat']===null)
localStorage.setItem('stats',JSON.stringify(data));}
for(k in lang){var language=lang[k];var total=0;for(stat in data[language]){var day=data[language][stat][0].day;var anteday=typeof(data[language][stat][0].anteday)==='undefined'?'-':data[language][stat][0].anteday;var week=data[language][stat][0].week;var anteweek=typeof(data[language][stat][0].anteweek)==='undefined'?'-':data[language][stat][0].anteweek;var month=data[language][stat][0].month;var antemonth=typeof(data[language][stat][0].antemonth)==='undefined'?'-':data[language][stat][0].antemonth;total+=data[language][stat][0].day!=null?parseInt(data[language][stat][0].day):0;trend=(anteday>day)?'down':(anteday<day)?'up':'equal';$("#stats_container ."+language+" #"+stat+" span:nth-child(1)").addClass(trend).html(day+'<small>'+anteday+'</small>');trend=(anteweek>week)?'down':(anteweek<week)?'up':'equal';$("#stats_container ."+language+" #"+stat+" span:nth-child(2)").addClass(trend).html(week+'<small>'+anteweek+'</small>');trend=(antemonth>month)?'down':(antemonth<month)?'up':'equal';$("#stats_container ."+language+" #"+stat+" span:nth-child(3)").addClass(trend).html(month+'<small>'+antemonth+'</small>');}
var text="<span class='icon'></span>Today "+total+" people registered.";$("#"+language+"_stat .info").html(text);}}});});
;(function(d){var k=d.scrollTo=function(a,i,e){d(window).scrollTo(a,i,e)};k.defaults={axis:'xy',duration:parseFloat(d.fn.jquery)>=1.3?0:1};k.window=function(a){return d(window)._scrollable()};d.fn._scrollable=function(){return this.map(function(){var a=this,i=!a.nodeName||d.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!i)return a;var e=(a.contentWindow||a).document||a.ownerDocument||a;return d.browser.safari||e.compatMode=='BackCompat'?e.body:e.documentElement})};d.fn.scrollTo=function(n,j,b){if(typeof j=='object'){b=j;j=0}if(typeof b=='function')b={onAfter:b};if(n=='max')n=9e9;b=d.extend({},k.defaults,b);j=j||b.speed||b.duration;b.queue=b.queue&&b.axis.length>1;if(b.queue)j/=2;b.offset=p(b.offset);b.over=p(b.over);return this._scrollable().each(function(){var q=this,r=d(q),f=n,s,g={},u=r.is('html,body');switch(typeof f){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(f)){f=p(f);break}f=d(f,this);case'object':if(f.is||f.style)s=(f=d(f)).offset()}d.each(b.axis.split(''),function(a,i){var e=i=='x'?'Left':'Top',h=e.toLowerCase(),c='scroll'+e,l=q[c],m=k.max(q,i);if(s){g[c]=s[h]+(u?0:l-r.offset()[h]);if(b.margin){g[c]-=parseInt(f.css('margin'+e))||0;g[c]-=parseInt(f.css('border'+e+'Width'))||0}g[c]+=b.offset[h]||0;if(b.over[h])g[c]+=f[i=='x'?'width':'height']()*b.over[h]}else{var o=f[h];g[c]=o.slice&&o.slice(-1)=='%'?parseFloat(o)/100*m:o}if(/^\d+$/.test(g[c]))g[c]=g[c]<=0?0:Math.min(g[c],m);if(!a&&b.queue){if(l!=g[c])t(b.onAfterFirst);delete g[c]}});t(b.onAfter);function t(a){r.animate(g,j,b.easing,a&&function(){a.call(this,n,b)})}}).end()};k.max=function(a,i){var e=i=='x'?'Width':'Height',h='scroll'+e;if(!d(a).is('html,body'))return a[h]-d(a)[e.toLowerCase()]();var c='client'+e,l=a.ownerDocument.documentElement,m=a.ownerDocument.body;return Math.max(l[h],m[h])-Math.min(l[c],m[c])};function p(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);
function str_repeat(i,m){for(var o=[];m>0;o[--m]=i);return o.join('');}
function sprintf(){var i=0,a,f=arguments[i++],o=[],m,p,c,x,s='';while(f){if(m=/^[^\x25]+/.exec(f)){o.push(m[0]);}
else if(m=/^\x25{2}/.exec(f)){o.push('%');}
else if(m=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(f)){if(((a=arguments[m[1]||i++])==null)||(a==undefined)){throw('Too few arguments.');}
if(/[^s]/.test(m[7])&&(typeof(a)!='number')){throw('Expecting number but found '+typeof(a));}
switch(m[7]){case'b':a=a.toString(2);break;case'c':a=String.fromCharCode(a);break;case'd':a=parseInt(a);break;case'e':a=m[6]?a.toExponential(m[6]):a.toExponential();break;case'f':a=m[6]?parseFloat(a).toFixed(m[6]):parseFloat(a);break;case'o':a=a.toString(8);break;case's':a=((a=String(a))&&m[6]?a.substring(0,m[6]):a);break;case'u':a=Math.abs(a);break;case'x':a=a.toString(16);break;case'X':a=a.toString(16).toUpperCase();break;}
a=(/[def]/.test(m[7])&&m[2]&&a>=0?'+'+a:a);c=m[3]?m[3]=='0'?'0':m[3].charAt(1):' ';x=m[5]-String(a).length-s.length;p=m[5]?str_repeat(c,x):'';o.push(s+(m[4]?a+p:p+a));}
else{throw('Huh ?!');}
f=f.substring(m[0].length);}
return o.join('');}
if(localStorage){Storage.prototype.setObj=function(key,obj){return this.setItem(key,JSON.stringify(obj))}
Storage.prototype.getObj=function(key){return JSON.parse(this.getItem(key))}}
if(Function.prototype.bind==null){Function.prototype.bind=(function(slice){function bind(context){var self=this;if(1<arguments.length){var $arguments=slice.call(arguments,1);return function(){return self.apply(context,arguments.length?$arguments.concat(slice.call(arguments)):$arguments);};}
return function(){return arguments.length?self.apply(context,arguments):self.call(context);};}
return bind;}(Array.prototype.slice));}
(function($){$.extend($.fn,{contains:function(el){var ret=false;if(typeof el=='string'){ret=$(this).has(el).length!=0;}else if('nodeType'in el[0]){ret=$.contains($(this),el);}
return ret;}});(function(){if($.fn.validate){$('form.validate').each(function(){var validator=$(this).validate({ignore:'input:hidden:not(:checkbox):not(:radio)',showErrors:function(errorMap,errorList){this.defaultShowErrors();var self=this;$.each(errorList,function(){var $input=$(this.element);var $label=$input.parent().find('label.error').hide();if(!$label.length){$label=$input.parent().parent().find('label.error');}
if($input.is(':not(:checkbox):not(:radio):not(select):not([type=file])')){$label.addClass('red');$label.css('width','');$input.trigger('labeled');}
$label.fadeIn();});},errorPlacement:function(error,element){if(element.is(':not(:checkbox):not(:radio):not(select):not([type=file])')){error.insertAfter(element);}else if(element.is('select')){error.appendTo(element.parent());}else if(element.is('[type=file]')){error.insertAfter(element.parent());}else{error.appendTo(element.parent().parent());}
if($.browser.msie){error.wrap('<div class="error-wrap" />');}}});$(this).find('input[type=reset]').click(function(){validator.resetForm();});});}
$('input, textarea').bind('labeled',function(){$(this).parent().find('label.error').css('width',parseFloat($(this).css('innerWidth'))-10+'px');});if($.fn.checkbox){$('input[type="checkbox"]').checkbox({cls:'checkbox',empty:'img/sprites/forms/checkboxes/empty.png'});$('input:radio').checkbox({cls:'radio-button',empty:'img/sprites/forms/checkboxes/empty.png'});}
if($.fn.chosen){$('select').chosen();$('.chzn-container').addClass('_100');$(window).resize(function(){$('.chzn-container').each(function(){var $chzn=$(this),$select=$('#'+$chzn.attr('id').replace('_chzn',''));$chzn.css('width',parseFloat($select.show().css('widthExact'))+3+'px');$select.hide();});});}
if($.fn.customFileInput&&$.fn.ellipsis){$('input[type=file]').customFileInput();}
if($.fn.placeholder){$('input, textarea').placeholder();}
if($.fn.datepicker&&$.fn.datetimepicker&&!$.browser.opera){var defaults={hourGrid:23,minuteGrid:59}
$('input[type=date]').datepicker($.extend(defaults,{showButtonPanel:true}));$('input[type=datetime]').datetimepicker(defaults);$('input[type=time]').not('[data-timeformat=12]').timepicker(defaults);$('input[type=time][data-timeformat=12]').timepicker($.extend(defaults,{ampm:true}));$('input.hasDatepicker[data-date-relative]').each(function(){var ids=$(this).attr('id').split(' '),id;var el=this;$.each(ids,function(){if(this.indexOf('dp')==0||$('label[for='+this+']').length){id=this;}});if(!id){throw"Invalid form";}
if($(this).attr('type')=='date'){$(this).datepicker("option","defaultDate",null);$('.ui-datepicker-today',$.datepicker._getInst($('#'+id)[0]).dpDiv).click();}else{$.datepicker._gotoToday('#'+id);}});}
if(!$.browser.opera&&$.fn.miniColors){$("input[type=color]").miniColors();}})();(function(){$(".alert").find(".hide").click(function(e){e.preventDefault();$(this).parent().parent().slideUp();});$('.box').find('.header').children('span').click(function(){var $this=$(this);var $box=$this.parents('.box');var $content=$box.find('.content');var $actions=$box.find('.actions');if($content.is(':visible')){$content.slideToggle('normal','easeInOutCirc',function(){$box.toggleClass('closed');$(window).resize();});$actions.slideToggle('normal','easeInOutCirc');}else{$content.slideToggle('normal','easeInOutCirc');$actions.slideToggle('normal','easeInOutCirc',function(){$(window).resize();});$box.toggleClass('closed');}});$('.box').find('.header').each(function(){var $this=$(this);if(!$this.contains('img')){$this.addClass('no-icon');}});$('.box').each(function(){var $this=$(this);var $content=$this.find('.content');$this.contains('.actions')&&$content.addClass('with-actions');$this.find('.header').hasClass('grey')&&$content.addClass('grey');!$this.contains('.header')&&$content.addClass('no-header');});})();(function(){if($.fn.equalHeights){var showWizPage=function(page_nr,$wiz){var max=$('.steps li',$wiz).length;if(page_nr<1||page_nr>max){return true;}else{$('.wizard').find('.steps').find('li').removeClass('current').eq(page_nr-1).addClass('current');$wiz.data('step',parseInt(page_nr));$wiz.find('.wiz_page').stop(true,true).hide('fade');$wiz.find('.step_'+page_nr).stop(true,true).delay(400).show('fade');return false;}};var btnClick=function(el,dir){var $wiz=$(el).parents('.wizard');var step=$wiz.data('step');showWizPage(step+dir,$wiz);};$('.wizard').find('.steps').find('a').click(function(){var step=$(this).attr('href').replace('#step_','');var $wiz=$(this).parents('.wizard');showWizPage(step,$wiz);});var $actions=$('.wizard').find('.actions');$actions.find('.prev').click(function(){btnClick(this,-1);});$actions.find('.next').click(function(){btnClick(this,1);});var initial_page=1;var hash=window.location.hash;if(hash.indexOf('#step-')==0){var index=parseInt(hash.substr(1).replace('step-',''));initial_page=index;}
$('.wizard').each(function(){var $wiz=$(this);showWizPage(initial_page,$wiz);});$('.wizard').find('.wiz_page').equalHeights().not(':first').hide();}})();(function(){if($('aside').length){$('#content-wrapper').css('margin-bottom','0');var resizeContentWrapper=function(){var self=resizeContentWrapper;if(typeof self.height=='undefined'){self.height=$(window).height();}
var target={content:$('#content-wrapper'),header:$('header'),footer:$('footer'),sidebar:$('aside')};var height={window:$(window).height(),document:$(document).height(),header:target.header.height(),footer:target.footer.height()};var resizeDirection=self.height-height.window;self.height=$(window).height();var diff=height.header+height.footer+1;$.extend(height,{document:$(document).height(),window:$(window).height()});if(resizeDirection>=0){target.content.css('height','');target.sidebar.css('height','');}
$.extend(height,{document:$(document).height(),window:$(window).height()});height.content=height.document-diff;target.content.css('height',height.content);}
resizeContentWrapper();$(window).bind('resize orientationchange',resizeContentWrapper);$(document).resize(resizeContentWrapper);if($.resize){$.resize.delay=200;$.resize.throttleWindow=false;}}})();if($.browser.msie){$('html').addClass('ie');$('input[type=submit],input[type=reset],button').each(function(){$(this).wrap('<div class="button-wrap" />')});$('.userinfo .info a').wrap('<div class="info-wrap" />');}else if($.browser.opera){$('html').addClass('opera');}else if($.browser.webkit){$('html').addClass('webkit');}
(function(){if($.fn.tipsy){$('a[rel=tooltip]').tipsy({fade:true});$('a[rel=tooltip-bottom]').tipsy({fade:true});$('a[rel=tooltip-right]').tipsy({fade:true,gravity:'w'});$('a[rel=tooltip-top]').tipsy({fade:true,gravity:'s'});$('a[rel=tooltip-left]').tipsy({fade:true,gravity:'e'});$('a[rel=tooltip-html]').tipsy({fade:true,html:true});$('div[rel=tooltip]').tipsy({fade:true});}})();(function(){var themed=false;var active=themed?'themed':'blue';try{var $img=$('#nav_main').find('li.current').find('img');$img.attr('src',$img.attr('src').replace('dark',active));}catch(e){};$('#nav_main').find('li').not('.current').find('ul').hide();$('#nav_main').children('li').children('a[href="#"]').click(function(){var $this=$(this),$li=$this.parent(),$ul=$li.parent();try{var $img=$this.parents('ul').children('.current').find('img');$img.attr('src',$img.attr('src').replace(active,'dark'));}catch(e){}
$ul.children().removeClass('current');$li.addClass('current');try{$img=$this.children('img');$img.attr('src',$img.attr('src').replace('dark',active));}catch(e){}
$ul.find('li').children("ul").fadeOut(150);if($li.contains("ul")){$li.children("ul").fadeIn(150)}
return false;});})();$('.graph').bind("plothover",function(event,pos,item){if(item){var x=item.datapoint[0].toFixed(2),y=item.datapoint[1].toFixed(2);$(this).tipsy({fallback:'',followMouse:true,autoGravity:true});$(this).tipsy('setTitle',item.series.label+" is "+y+" at "+x);$(this).tipsy('show');}else{$(this).tipsy('hide');}});(function(){if($.fn.prettyPhoto){$('.gallery .action-list').hide();$('.gallery').children('li').mouseenter(function(){$(this).find('.action-list').animate({width:"show"},250);});$('.gallery').children('li').mouseleave(function(){$(this).find('.action-list').animate({width:"hide"},250);});$(".gallery").find("a[rel^='prettyPhoto']").prettyPhoto();}})();(function(){var noPropagation=function(e){e.stopPropagation();};$(document).click(function(){var $this=$(this);$('.toolbox:visible').fadeOut();$('.toolbar_large').find('.dropdown:visible').each(function(){$this.slideUp({easing:'easeInOutCirc'});$this.parent().find('.toolcaption').removeClass('active');});});$('.toolbutton').each(function(){var $button=$(this);if($button.next().hasClass('toolbox')){$button.click(function(e){noPropagation(e);$(this).next().fadeToggle();});$button.next().click(noPropagation);$button.next().hide();}});$('.toolbar_large').each(function(){var $toolbar=$(this),$dropdown=$toolbar.find('.dropdown');$toolbar.find('.toolcaption').css('min-width',$dropdown.innerWidth()-2+'px');$toolbar.find('.toolcaption').click(function(e){$dropdown.css('width',parseFloat($toolbar.find('.toolcaption').css('width'))+12+"px");noPropagation(e);$(this).toggleClass('active');$dropdown.slideToggle({easing:'easeInOutCirc'});$dropdown.click(noPropagation);});$dropdown.hide();});})();if($.jGrowl){$.jGrowl.defaults.life=8000
$.jGrowl.defaults.pool=5}
(function(){var max=-1;var elements=$('.activity.fixed.equal').find('.description');elements.each(function(){var width=$(this).width();if(width>max){max=width;}});elements.each(function(){$(this).width(max);});})();$(document).ready(function(){if($('.alert.slide').length>0)
setTimeout(function(){$('.alert.slide').slideUp(800)},3000);if($('.Controller_Users, .Controller_Groups').length>0){$('#nav_main .users').addClass('current').find('ul').show();if($('.Controller_Users.index').length>0)
$('#nav_main .users ul li.users_index').addClass('current');if($('.Controller_Users.create').length>0)
$('#nav_main .users ul li.users_create').addClass('current');if($('.Controller_Groups.index').length>0)
$('#nav_main .users ul li.groups_index').addClass('current');if($('.Controller_Groups.create').length>0)
$('#nav_main .users ul .groups_create').addClass('current');}
else if($('.Controller_Welcome ').length>0)
$('#nav_main .dashboard').addClass('current');else if($('.Controller_Customers').length>0){$('#nav_main .customers').addClass('current').find('ul').show();var pos=$('.Controller_Customers').attr('data-view');$('#nav_main ul').find("."+pos).addClass('current');}
else if($('.Controller_Charts').length>0){$('#nav_main .charts').addClass('current').find('ul').show();if($('.Controller_Charts.index').length>0)
$('#nav_main .charts ul li:nth-child(1)').addClass('current');}});jQuery.fn.topLink=function(settings){settings=jQuery.extend({min:1,fadeSpeed:200},settings);return this.each(function(){var el=$(this);el.hide();$(window).scroll(function(){if($(window).scrollTop()>=settings.min)
{el.fadeIn(settings.fadeSpeed);}
else
{el.fadeOut(settings.fadeSpeed);}});});};$("#top-link").topLink({min:100,fadeSpeed:800})
$('#top-link').click(function(e){e.preventDefault();$.scrollTo(0,500);});$('.Controller_Users #grid input[type=checkbox]').change(function(e){block=e.currentTarget.checked;var $username=$(this).parent().parent().find('.username');if(block){$username.wrapInner('<span class="blocked" title="user blocked" />')
$.ajax({url:'ajax/block',data:{username:$username.find('.blocked').text()},type:'POST',success:function(d){$.jGrowl("User <b>"+$username.find('.blocked').text()+"</b> has been successfuly blocked",{theme:'success'});}});}
else{$username.find('.blocked').contents().unwrap();$.ajax({url:'ajax/unblock',data:{username:$username.text()},type:'POST',success:function(d){$.jGrowl("User <b>"+$username.text()+"</b> has been successfuly unblocked",{theme:'success'});}});}});$('button.save').click(function(e){e.preventDefault();if(!window.localStorage){alert('localStorage not supported');}
else{var $form=$(this).parent().parent().parent();var subject=$form.find('#form_subject').val();var content=$form.find('#form_content').val();var to=$('.message').data('to');var current=localStorage.getObj('message');var messages=new Array();if(current!=null)
messages=current;var push=false;for(i in messages){message=messages[i];if(message.to==to){messages[i]={to:to,content:content,subject:subject,date:new Date()};push=!push;}}
if(!push)
messages.push({to:to,content:content,subject:subject,date:new Date()});localStorage.setObj('message',messages);$.jGrowl("Your message has been successfuly saved locally",{theme:'success'});}});})(jQuery);
var wn=window.webkitNotifications;var maxDisplay=10;if(typeof localStorage.view=='undefined')localStorage.view=0;localStorage.view++;var still=maxDisplay-localStorage.view;if(!window.WebSocket){if(still>0)
$.jGrowl("Your browser is outdated, in order to use the live notification please use at least <b>Chrome 6</b> or <b>Firefox 8</b> or <b>Internet Explorer 10</b> or <b>Opera 12.10</b> or <b>Safari 5.0</b>.<br />This message will be displayed "+still+" times",{theme:'information',life:10000});}
else{var ws=new WebSocket('ws://192.168.1.214:8000/server.php');ws.onerror=function(){console.log('error');}
ws.onclose=function(){$.jGrowl('Connection to websocket server closed',{theme:'information'});}
if(!window.webkitNotifications){if(localStorage.view<maxDisplay)
$.jGrowl("Notification only works on <b>Chrome</b> from the <b>version 6</b>.<br />This message will be displayed "+still+" times",{theme:'information',life:10000});ws.onmessage=function(e){var msg=jQuery.parseJSON(e.data);if(msg.text&&msg.url&&msg.form)
text=sprintf(msg.text,msg.form)+' <a href="'+msg.url+'">Click here</a>';else
text='';$.jGrowl(text,{theme:'information',life:10000});}}
else{if(wn.checkPermission()==0){ws.onmessage=function(e){var msg=jQuery.parseJSON(e.data);if(msg.text&&msg.form){text=sprintf(msg.text,msg.form);}
else
text='';var notification=wn.createNotification('http://192.168.1.214:3000/assets/img/icons/25x25/dark/user.png','Notification From the IKON backoffice',text);notification.show();window.setTimeout(function(){notification.close()},10000)}}
else{$.jGrowl("<a href='#' onclick=allowNotification(); return false;>Allow the notification on your browser</a>",{theme:'information',life:10000});ws.onmessage=function(e){var msg=jQuery.parseJSON(e.data);if(msg.text&&msg.url&&msg.form)
var text=sprintf(msg.text,msg.form)+' <a href="'+msg.url+'">Click here</a>';$.jGrowl(e.data,{theme:'information',life:10000});}}}}
var allowNotification=function(){allowed=wn.requestPermission();if(allowed)
wn.createNotification('http://192.168.1.214:3000/assets/img/icons/16x16/user.png','info','Notification allowed for the IKON backoffice')}
var fs=function(){$.jGrowl("You are now in fullscreen Mode, to quit it press <b>ESC</b> on your keyboard",{theme:'information',life:10000});if(document.documentElement.webkitRequestFullscreen)
document.documentElement.webkitRequestFullscreen();else if(document.documentElement.RequestFullscreen)
document.documentElement.RequestFullscreen();else if(document.documentElement.mozRequestFullScreen)
document.documentElement.mozRequestFullScreen();}
if(document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.fullScreenEnabled){$.jGrowl("<a href='#' onclick='fs(); return false;'>Fullscreen</a>",{theme:'information',life:3000});}
